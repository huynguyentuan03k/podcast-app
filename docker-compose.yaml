version: '3.9'

services:
  blue:
    build:
      context: .
      dockerfile: Dockerfile

    container_name: laravel-blue
    restart: unless-stopped
    ports:
      - "8082:80"
    volumes:
      - ./docker/nginx-log:/var/log/nginx
      - /home/huy/podcast-app/.env:/var/www/.env
      - /home/huy/podcast-app/storage:/var/www/storage
    networks:
      - laravel_net
    env_file:
      - .env

  green:
    build:
      context: .
      dockerfile: Dockerfile

    container_name: laravel-green
    restart: unless-stopped
    networks:
      - laravel_net
    ports:
      - "8081:80"
    volumes:
      - ./docker/nginx-log:/var/log/nginx
      - /home/huy/podcast-app/.env:/var/www/.env
      - /home/huy/podcast-app/storage:/var/www/storage
    env_file:
      - .env


networks:
  laravel_net:
    external: true
